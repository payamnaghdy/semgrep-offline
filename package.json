{
  "name": "semgrep-offline",
  "displayName": "Semgrep Offline",
  "description": "Offline semgrep linter with SOLID principle checks (SRP via LCOM4, OCP via TCD+TFSC, DIP via DII, ISP via IFS+SIR)",
  "version": "1.5.0",
  "publisher": "payamnaghdi",
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "https://github.com/payamnaghdy/semgrep-offline"
  },
  "engines": {
    "vscode": "^1.74.0"
  },
  "categories": [
    "Linters"
  ],
  "activationEvents": [
    "onLanguage:python"
  ],
  "main": "./out/extension.js",
  "contributes": {
    "commands": [
      {
        "command": "semgrep-offline.scanFile",
        "title": "Semgrep: Scan Current File"
      },
      {
        "command": "semgrep-offline.scanWorkspace",
        "title": "Semgrep: Scan Workspace"
      },
      {
        "command": "semgrep-offline.clearDiagnostics",
        "title": "Semgrep: Clear All Diagnostics"
      },
      {
        "command": "semgrep-offline.checkSRP",
        "title": "SOLID: Check Single Responsibility Principle (LCOM4)"
      },
      {
        "command": "semgrep-offline.checkOCP",
        "title": "SOLID: Check Open/Closed Principle (TCD+TFSC)"
      },
      {
        "command": "semgrep-offline.checkDIP",
        "title": "SOLID: Check Dependency Inversion Principle (DII)"
      },
      {
        "command": "semgrep-offline.checkISP",
        "title": "SOLID: Check Interface Segregation Principle (IFS+SIR)"
      }
    ],
    "configuration": [
      {
        "title": "Semgrep",
        "properties": {
          "semgrepOffline.rulesPath": {
            "type": "string",
            "default": "semgrep_rules.yaml",
            "description": "Path to semgrep rules file (relative to workspace or absolute)",
            "order": 1
          },
          "semgrepOffline.semgrepPath": {
            "type": "string",
            "default": "semgrep",
            "description": "Path to semgrep executable",
            "order": 2
          },
          "semgrepOffline.languages": {
            "type": "array",
            "default": [
              "python"
            ],
            "description": "Languages to scan",
            "order": 3
          },
          "semgrepOffline.scanOnSave": {
            "type": "boolean",
            "default": true,
            "description": "Automatically scan files on save",
            "order": 4
          },
          "semgrepOffline.scanOnOpen": {
            "type": "boolean",
            "default": true,
            "description": "Automatically scan files when opened",
            "order": 5
          },
          "semgrepOffline.scanOnChange": {
            "type": "boolean",
            "default": false,
            "description": "Automatically scan files when content changes (debounced)",
            "order": 6
          },
          "semgrepOffline.scanOnChangeDelay": {
            "type": "number",
            "default": 1500,
            "description": "Delay in milliseconds before scanning after content changes",
            "order": 7
          },
          "semgrepOffline.useCache": {
            "type": "boolean",
            "default": true,
            "description": "Skip scanning unchanged files (based on content hash)",
            "order": 8
          }
        }
      },
      {
        "title": "Security Rules",
        "properties": {
          "semgrepOffline.enableSecurityRules": {
            "type": "boolean",
            "default": false,
            "description": "Enable bundled Python and Django security rules (SQL injection, XSS, command injection, etc.)",
            "order": 1
          },
          "semgrepOffline.securityRulesSeverity": {
            "type": "string",
            "enum": ["error", "warning", "info"],
            "default": "warning",
            "description": "Minimum severity level for security rule findings",
            "order": 2
          }
        }
      },
      {
        "title": "SOLID: Single Responsibility (SRP)",
        "properties": {
          "semgrepOffline.enableSRP": {
            "type": "boolean",
            "default": false,
            "description": "Enable SRP check during automatic scans",
            "order": 1
          },
          "semgrepOffline.srpLcom4Threshold": {
            "type": "number",
            "default": 1,
            "description": "LCOM4 threshold. Classes with LCOM4 > threshold are flagged. (1 = ideal cohesion, higher = more tolerant)",
            "order": 2
          }
        }
      },
      {
        "title": "SOLID: Open/Closed (OCP)",
        "properties": {
          "semgrepOffline.enableOCP": {
            "type": "boolean",
            "default": false,
            "description": "Enable OCP check during automatic scans",
            "order": 1
          },
          "semgrepOffline.ocpScoreThreshold": {
            "type": "number",
            "default": 4,
            "description": "OCP score threshold. Methods with score > threshold are flagged. Weights: instanceof=2, type()==2, typeof=1, .type==1.5",
            "order": 2
          }
        }
      },
      {
        "title": "SOLID: Dependency Inversion (DIP)",
        "properties": {
          "semgrepOffline.enableDIP": {
            "type": "boolean",
            "default": false,
            "description": "Enable DIP check during automatic scans",
            "order": 1
          },
          "semgrepOffline.dipScoreThreshold": {
            "type": "number",
            "default": 3,
            "description": "DIP score threshold. Classes with score >= threshold are flagged. Weights: constructor=2, method=1.5",
            "order": 2
          }
        }
      },
      {
        "title": "SOLID: Interface Segregation (ISP)",
        "properties": {
          "semgrepOffline.enableISP": {
            "type": "boolean",
            "default": false,
            "description": "Enable ISP check during automatic scans",
            "order": 1
          },
          "semgrepOffline.ispFatInterfaceThreshold": {
            "type": "number",
            "default": 5,
            "description": "Fat interface threshold. Interfaces with more abstract methods than this are flagged",
            "order": 2
          },
          "semgrepOffline.ispSirThreshold": {
            "type": "number",
            "default": 0.3,
            "description": "Stub Implementation Ratio threshold. Classes with SIR >= threshold are flagged (0.3 = 30%)",
            "order": 3
          }
        }
      }
    ]
  },
  "scripts": {
    "vscode:prepublish": "npm run compile",
    "compile": "tsc -p ./",
    "watch": "tsc -watch -p ./",
    "lint": "eslint src --ext ts"
  },
  "devDependencies": {
    "@types/node": "^18.0.0",
    "@types/vscode": "^1.74.0",
    "@vscode/vsce": "^3.7.1",
    "typescript": "^5.0.0"
  }
}
